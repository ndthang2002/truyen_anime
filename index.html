<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang chủ</title>
    <link rel="icon" type="image/x-icon" href="image/icon/logo.png" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="listtruyen.js"></script>
    <script src="https://code.angularjs.org/1.8.0/angular-route.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />


    
    
</head>

<body ng-app="myapp" ng-controller="danhsach" class="p-0">
    <!-- Header -->
    <div id="fb-root"></div>
    <script async defer src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6"></script>
    <div ng-include="'header.html'"></div>
 
  <!-- comment facebook -->
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v17.0&appId=1877101832673023&autoLogAppEvents=1" nonce="m9XQ9CkV"></script>

  

    <!-- Body -->
    <div class="bg-dark p-0">
        <div ng-view></div>

        <div class="container bg-dark">
          
            <section class="about-section pt-0 pb-5" id="binhluan">
                <div class="container p-0">
                    <h1 class="text-warning ms-5">Bình luận mới</h1>
                    <hr style="border-bottom: 6px solid rgb(255, 255, 0);">
                    <div class="comment p-3 mt-5">
                        <div style="background-color: rgb(26, 26, 26); color: white;" class="card">
                            <div class="card-body">
                                <div class="row">
                                    <h5 class="card-title col-8 col-lg-9 ps-3 text-warning">Trở Thành Con Gái Nhà Tài
                                        Phiệt</h5>
                                    <p class="col-lg-3 col-4 text-light text-center fw-bold">
                                        <i class="bi bi-bookmark-fill"></i> Chapter 46
                                    </p>
                                </div>
                                <p class="card-text ps-2">Ghê đấy</p>
                                <div class="row align-items-center">
                                    <div class="col-7 col-lg-9 d-inline-flex">
                                        <img src="https://toptruyen.net/images_user/1652593181.jpg" style="width: 45px; height: 45px;"
                                            class="rounded-circle col-lg-1 col-1" alt="">
                                        <h6 class="col-lg-3 col-6 ms-2 text-primary mt-2">Bé mắm cute</h6>
                                    </div>
                                    <div class="col-5 col-lg-3">
                                        <h6 class="text-center text-muted"><i class="bi bi-clock-fill"></i>
                                            1 giờ trước</h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr style="border-bottom: 3px solid white;">
                        <div style="background-color: rgb(26, 26, 26); color: white;" class="card">
                            <div class="card-body">
                                <div class="row">
                                    <h5 class="card-title col-8 col-lg-9 ps-3 text-warning">Trở Thành Con Gái Nhà Tài
                                        Phiệt</h5>
                                    <p class="col-lg-3 col-4 text-light text-center fw-bold">
                                        <i class="bi bi-bookmark-fill"></i> Chapter 46
                                    </p>
                                </div>
                                <p class="card-text ps-2">Ghê đấy</p>
                                <div class="row align-items-center">
                                    <div class="col-7 col-lg-9 d-inline-flex">
                                        <img src="https://toptruyen.net/images_user/1652593181.jpg" style="width: 45px; height: 45px;"
                                            class="rounded-circle col-lg-1 col-1" alt="">
                                        <h6 class="col-lg-3 col-6 ms-2 text-primary mt-2">Bé mắm cute</h6>
                                    </div>
                                    <div class="col-5 col-lg-3">
                                        <h6 class="text-center text-muted"><i class="bi bi-clock-fill"></i>
                                            1 giờ trước</h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr style="border-bottom: 3px solid white;">
                        <div style="background-color: rgb(26, 26, 26); color: white;" class="card">
                            <div class="card-body">
                                <div class="row">
                                    <h5 class="card-title col-8 col-lg-9 ps-3 text-warning">Trở Thành Con Gái Nhà Tài
                                        Phiệt</h5>
                                    <p class="col-lg-3 col-4 text-light text-center fw-bold">
                                        <i class="bi bi-bookmark-fill"></i> Chapter 46
                                    </p>
                                </div>
                                <p class="card-text ps-2">Ghê đấy</p>
                                <div class="row align-items-center">
                                    <div class="col-7 col-lg-9 d-inline-flex">
                                        <img src="https://toptruyen.net/images_user/1652593181.jpg" style="width: 45px; height: 45px;"
                                            class="rounded-circle col-lg-1 col-1" alt="">
                                        <h6 class="col-lg-3 col-6 ms-2 text-primary mt-2">Bé mắm cute</h6>
                                    </div>
                                    <div class="col-5 col-lg-3">
                                        <h6 class="text-center text-muted"><i class="bi bi-clock-fill"></i>
                                            1 giờ trước</h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr style="border-bottom: 3px solid white;">
                    </div>
                </div>
            </section>
        </div>
    </div>
    
 <!-- Modal -->
 <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-danger" id="exampleModalLabel">Thông báo</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body fw-bold fs-5">
                Không có thông báo dành cho bạn !
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>

    <div ng-include="'footer.html'"></div>
    
   
</body>



<script>
    var app = angular.module("myapp", ["ngRoute"]);
    // #!thongtintruyen/{{x.id}}/{{x.ten}}

    app.controller("danhsach", function ($scope, $routeParams, $http, $rootScope,$filter) {
        $scope.dstheloai = ["Tất cả", "Hành động", "Hài hước", "Tình cảm", "Đời thường", "Giả tưởng", "Võ thuật"
            , "Kinh Dị", "Trinh Thám", "Xuyên Không", "Trùng Sinh", "Siêu Nhiên", "Manhua", "ManhWa", "Manga", "Harem"
            , "Drama", "Chuyển Sinh", "Ngôn Tình", "Đam Mỹ", "Phiêu Lưu", "Lịch Sử", "Ecchi", "Bí ẩn", "Học đường"];
        $scope.start = 0;
        $scope.id = $routeParams.id;
        $scope.ten = $routeParams.ten;
        $scope.theloaiparam = $routeParams.t;
        $scope.danhsach = listtruyen;
        $rootScope.thongtin;
        var tt;
        $scope.theloai;
        //
        //
        $scope.datachapter = [];
        $scope.chapter;
        $scope.imagechap = [];
        $scope.namechapter = $routeParams.namechapter;
        $scope.indexchapter = $routeParams.index;
        $scope.name;
        $scope.urlchapter;
        for (var i = 0; i < $scope.danhsach.length; i++) {
            tt = $scope.danhsach[i];
            if (tt.id == $scope.id && tt.ten == $scope.ten || $scope.namechapter == tt.ten) {
                $scope.thongtin = tt;
                $scope.name = $scope.thongtin.ten;
                $scope.theloai = tt.theloai;
                $http.get($scope.thongtin.id + ".js").then(function (d) {
                    var student = d.data;
                    console.log(student);
                    function groupBy(objectArray, property) {
                        return objectArray.reduce(function (accumulator, obj) {
                            var key = obj[property]
                            if (!accumulator[key]) {
                                accumulator[key] = []
                            }
                            accumulator[key].push(obj)
                            return accumulator
                        }, {})
                    }
                    var chapters = groupBy(student, 'chapter')
                    $scope.chapter = Object.entries(chapters);
                    $scope.lq = $scope.chapter[$scope.indexchapter][1].length;
                    console.log($scope.chapter);
                    for (var i = 0; i < $scope.lq; i++) {
                        $scope.imagechap.push($scope.chapter[$scope.indexchapter][1][i].urlchapter);
                        console.log($scope.chapter[$scope.indexchapter][1][i].urlchapter);
                    }
                }, function (d) { });
                break;
            }
        }

    
        // $filter('filterFindcomic')(array,expression,comparator) = function(){
        //     function removeAccents(str) {
        //         return str.normalize('NFD').replace(/[\u0300-\u036f]/g, "");
        //         }
                
        //         return function(items, searchText) {
        //         if (!searchText) {
        //             return items;
        //         }
                
        //         searchText = removeAccents(searchText.toLowerCase());
                
        //         return items.filter(function(item) {
        //             return removeAccents(item.toLowerCase()).indexOf(searchText) !== -1;
        //         });
        //         };
        // }

        $scope.next = function () {
            if ($scope.start >= $scope.danhsach.length - 6) {
                alert("Đã tới cuối trang");
                $scope.discuoi = "disabled";
            } else {
                $scope.disdau = "";
                $scope.start += 6;
            }
        };
        $scope.Previous = function () {
            if ($scope.start <= 0) {
                alert("Đã tới đầu trang");
                $scope.disdau = "disabled";
            } else {
                $scope.disdau = "";
                $scope.discuoi = "";
                $scope.start -= 6;
            }
        };
        
    });
    app.config(function ($routeProvider) {
        $routeProvider
            .when("/thongtintruyen/:id/:ten", { templateUrl: "thongtintruyen.html", controller: "danhsach" })
            .when("/loctheloai/:t", { templateUrl: "loctheloai.html", controller: "danhsach" })
            .when("/:namechapter/chapter/:index", { templateUrl: "readcomic.html", controller: "danhsach" })
            .when("/thongtintaikhoan", { templateUrl: "thongtintaikhoan.html", controller: "danhsach" })
            .when("/congdongtruyen", { templateUrl: "congdongtruyen.html", controller: "danhsach" })
            .when("/lichsu", { templateUrl: "lichsu.html", controller: "danhsach" })
            .otherwise({ templateUrl: "indexmenu.html" });
    });
    
</script>

<!-- <script>
    var checkbox_toggle = document.getElementById('light-dark');
    checkbox_toggle.addEventListener('change', function () {
        // THêm class dark cho body
        document.body.classList.toggle('dark');
    });
    if(screen.width>768){
        var h = document.getElementById("menu-mobile");
        h.classList.remove("collapse");
    };
</script> -->
<script>
    $(':radio').change(function() {
  console.log('New star rating: ' + this.value);
});
</script>



</html>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>
    